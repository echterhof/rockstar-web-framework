# ============================================================================
# Logging Plugin Manifest
# ============================================================================

name: logging-plugin
version: 1.0.0
description: Request and response logging plugin with sensitive data masking
author: Rockstar Framework Team

# Framework compatibility
framework:
  version: ">=1.0.0"

# Plugin dependencies
dependencies: []

# Required permissions
permissions:
  database: false
  cache: false
  router: true
  config: true
  filesystem: false
  network: false
  exec: false

# Configuration schema
config:
  log_requests:
    type: bool
    default: true
    description: Enable request logging
  log_responses:
    type: bool
    default: true
    description: Enable response logging
  log_headers:
    type: bool
    default: true
    description: Include headers in logs
  log_body:
    type: bool
    default: false
    description: Include request/response body in logs
  log_query_params:
    type: bool
    default: true
    description: Include query parameters in logs
  output_format:
    type: string
    default: "json"
    description: Log output format (json, text, or structured)
  async_logging:
    type: bool
    default: true
    description: Enable asynchronous logging
  buffer_size:
    type: int
    default: 1000
    description: Async logging buffer size
  excluded_paths:
    type: array
    items: string
    default:
      - "/health"
      - "/metrics"
    description: Paths to exclude from logging
  mask_headers:
    type: array
    items: string
    default:
      - "Authorization"
      - "Cookie"
    description: Headers to mask in logs

# Hook registrations
hooks:
  - type: pre_request
    priority: 50
  - type: post_request
    priority: 50
  - type: error
    priority: 50

# Event subscriptions and publications
events:
  publishes: []
  subscribes:
    - auth.login

# Exported services
exports:
  - name: LoggingService
    description: Provides access to request/response counts
